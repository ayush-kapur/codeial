<!-- when note using layouts -->
<!-- <html>
    <head>
        <title>
            <%= title %>
        </title>
    </head>
    <body>
        <%# include('_header'); %>
        <h1>Codial /<%= title%></h1>
        <%# include('_footer'); %>
    </body>
</html> -->

<!-- adding css here to get different design for each layout  -->
<link rel="stylesheet" href="/css/home.css">
<h1>Codeial / <%= title%></h1>
<section id="feed-post">
    <h4>Posts</h4>
    <!-- only showing the form if the user is logged in -->
    <% if(locals.user){ %>
        <form action="/posts/create" id="new-post-form" method="POST">
            <textarea name="content" cols="30" rows="3" placeholder="Type Here...." required></textarea>
            <input type="submit" value="Post">
        </form>
    <% } %>
</section>
<div id="post-list-container">
    <ol>
        <% for(let i of post_list){ %>
        <p>
            <li>
                <b><%= i.content %></b>
                <br>
                <small><%= i.user.name %></small>
                <% if(locals.user){ %>
                    <div id="comment-section">
                        <form action="/comments/create" method="POST">
                            <textarea name="comment" cols="30" rows="3" placeholder="Type Comment Here...." required></textarea>
                            <input type="hidden" name="post" value="<%= i._id %>">
                            <input type="submit" value="Comment">
                        </form>
                    </div>
                <% } %>
            </li>
        </p>
        <% } %>
    </ol>
</div>